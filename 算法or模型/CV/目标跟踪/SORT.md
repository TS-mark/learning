# SORT 多目标跟踪
## SORT流程
SORT 是论文《Simple Online and Realtime Tracking》的缩写，主要分为四个流程：
1) 检测模块；  
2) 运动估计模块；
3) 数据关联模块；
4) 被跟踪物体的建立与销毁模块。
### 1. 检测模块
可以使用Faster RCNN、 YOLO等目标检测模型。
### 2. 运动估计模块
$ x = [u,v,s,r,\hat u, \hat v, \hat s]^T $。   
u、v表示目标中心水平和垂直位置、s和r表示boundingbox大小（论文里写的r代表横纵比->aspect ratio，s表示面积、
）
假如当前帧检测出3个物体，运动估计模块利用<font color = red>Kalman Filter</font>，得到下一帧(或下几帧)这3个物体的状态。预测过程使用的是匀速模型，如果下一帧的某个检测结果和其中某个物体关联起来了，那么用检测结果作为观测值来更新该物体的状态。
### 3. 数据关联模块
数据关联就是回答当前检测得到的物体是现有的哪个物体(assigning detections to existing targets)。假设上一帧检测出3个物体，当前帧检测出4个物体，那么我们可以得到一个3×4的矩阵，矩阵中每个元素表示预测的bbox和当前检测的bbox的IoU距离(Intersection-over-union distance)。基于这个矩阵，为了使总的IoU距离最小，可以利用<font color = red>匈牙利算法 </font>进行匹配/指配，从而完成数据关联。
### 4. 被跟踪物体的建立与销毁模块
* 如果某个检测得到的物体和所有现有的trakcer的IoU都很小($ <IoU_{min} $) ，那么会基于它建立一个新的trakcer，这个物体的速度初始化为0，速度相关的协方差分量会初始化为一个很大的值；如果一个被跟踪的物体(tracker)如果在$ T_{Lost} $帧未被检测关联上，那么该tracker会被销毁。

## kalman Filter 卡尔曼滤波算法
卡尔曼滤波是最优估计算法，是融合/结合各种带有不确定信息的一种有利工具，对内存占用很少，具有很好的实时性。

卡尔曼滤波基于两个关键步骤：预测（Prediction）和更新（Update）。

* 预测（Prediction）：
预测阶段利用系统的动态模型来预测当前状态的估计值。
这一步包括两个部分：
状态预测： 根据系统的状态转移方程预测下一时刻的状态。
协方差预测： 预测状态估计的不确定性（协方差矩阵）。

* 更新（Update）：
更新阶段将预测的状态与实际的传感器测量进行比较，然后更新状态的估计。
这一步同样包括两个部分：
卡尔曼增益计算： 衡量预测值与测量值之间的不确定性，以确定在更新中应该给予多少权重。
状态更新： 利用卡尔曼增益来结合预测值和测量值，得到对系统当前状态的更新估计。